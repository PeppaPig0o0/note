### 豆瓣分类排行榜

```python
import requests
import json
'''
豆瓣分类排行榜
https://movie.douban.com/j/chart/top_list
使用Ajax技术爬取数据，并存储json文件中
Ajax 异步javascript响应 xml
'''
# url和参数
url = 'https://movie.douban.com/j/chart/top_list'
params = {
    'type_name': '剧情',
    'type': '11',
    'interval_id': '100:90',
    'action': '',
    'start': '0',
    'limit': '20'
}
# 伪装请求头部User-Agent
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36'
}
response = requests.get(url, params=params, headers=headers)

print(response.status_code)  # 响应状态码
# print(response.text)  # 响应内容是json类型数据

json_data = response.text  # 响应内容是json类型数据
a = json.loads(json_data)  # 将json数据转成列表

# 新建一个txt文件，a+读写追加模式    w写入  w+追加写入   r读取
fp = open('豆瓣电影分类排行榜数据/剧情.txt', 'a+', encoding='utf-8')
# 每条电影的数据，写入单独一行
for i in a:
    print(i)
    fp.write(str(i)+'\n')  # 把字典数据转成字符串并存储
fp.close()  # 关闭文件

```

```python
import time
import requests
import json
'''
豆瓣分类排行榜
https://movie.douban.com/j/chart/top_list
使用Ajax技术爬取数据，并存储json文件中
Ajax 异步javascript响应 xml
'''
# url和参数
url = 'https://movie.douban.com/j/chart/top_list'
chart = {
    '剧情': '11',
    '喜剧': '24',
    '动作': '5',
    '爱情': '13'
}
for key, value in chart.items():
    print('开始爬取', key)
    for m in range(0, 501, 50):  # 0-49   50-99  100-149 150-199
        time.sleep(2)
        params = {
            'type_name': key,
            'type': value,
            'interval_id': '100:90',
            'action': '',
            'start': m,
            'limit': '50'  # 每次请求数据数量
        }
        # 伪装请求头部User-Agent
        headers = {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36'
        }
        response = requests.get(url, params=params, headers=headers)

        print(response.status_code)  # 响应状态码
        # print(response.text)  # 响应内容是json类型数据

        json_data = response.text  # 响应内容是json类型数据
        a = json.loads(json_data)  # 将json数据转成列表

        # 新建一个txt文件，a+读写追加模式    w写入  w+追加写入   r读取
        fp = open('豆瓣电影分类排行榜数据/剧情.txt', 'a+', encoding='utf-8')
        # 每条电影的数据，写入单独一行
        for i in a:
            print(i)
            fp.write(str(i)+'\n')  # 把字典数据转成字符串并存储
        fp.close()  # 关闭文件

```

